!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/platform-browser"),require("rxjs"),require("rxjs/operators"),require("@angular/common")):"function"==typeof define&&define.amd?define("ngx-highlightjs",["exports","@angular/core","@angular/platform-browser","rxjs","rxjs/operators","@angular/common"],t):t((e=e||self)["ngx-highlightjs"]={},e.ng.core,e.ng.platformBrowser,e.rxjs,e.rxjs.operators,e.ng.common)}(this,(function(e,t,r,n,i,o){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */function a(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a}var u=new t.InjectionToken("HIGHLIGHT_OPTIONS"),s=function(){function e(e,t,r){var a=this;this._options=r,this._ready=new n.BehaviorSubject(null),this.ready=this._ready.asObservable().pipe(i.filter((function(e){return!!e})),i.take(1)),o.isPlatformBrowser(t)&&e.defaultView.hljs?this._ready.next(e.defaultView.hljs):this._loadLibrary().pipe(i.switchMap((function(t){return a._options&&a._options.lineNumbers?(e.defaultView.hljs=t,l(import("highlightjs-line-numbers.js")).pipe(i.tap((function(){return a._ready.next(t)})))):(a._ready.next(t),n.EMPTY)})),i.catchError((function(e){return console.error("Unable to load hljs library",e),n.EMPTY}))).subscribe()}return e.prototype._loadLibrary=function(){var e=this;return this._options&&this._options.languages&&Object.keys(this._options.languages).length?n.from(l(import("highlight.js/lib/highlight"))).pipe(i.switchMap((function(t){return e._loadLanguages(t)}))):n.from(l(import("highlight.js")))},e.prototype._loadLanguages=function(e){var t=Object.entries(this._options.languages).map((function(t){var r=a(t,2),n=r[0],o=r[1];return l(o()).pipe(i.tap((function(t){return e.registerLanguage(n,t)})))}));return n.zip.apply(void 0,function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(a(arguments[t]));return e}(t)).pipe(i.map((function(){return e})))},e.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:void 0,decorators:[{type:t.Inject,args:[o.DOCUMENT]}]},{type:Object,decorators:[{type:t.Inject,args:[t.PLATFORM_ID]}]},{type:void 0,decorators:[{type:t.Optional},{type:t.Inject,args:[u]}]}]},e.ngInjectableDef=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(o.DOCUMENT),t.ɵɵinject(t.PLATFORM_ID),t.ɵɵinject(u,8))},token:e,providedIn:"root"}),e}();var l=function(e){return n.from(e).pipe(i.filter((function(e){return!!e&&!!e.default})),i.map((function(e){return e.default})))},p=function(){function e(e,t){var r=this;this._loader=e,e.ready.pipe().subscribe((function(e){r._hljs=e,t&&t.config&&(e.configure(t.config),e.listLanguages().length<1&&console.error("[HighlightJS]: No languages were registered!"))}))}return Object.defineProperty(e.prototype,"hljs",{get:function(){return this._hljs},enumerable:!0,configurable:!0}),e.prototype.highlight=function(e,t,r,n){return this._loader.ready.pipe(i.map((function(i){return i.highlight(e,t,r,n)})))},e.prototype.highlightAuto=function(e,t){return this._loader.ready.pipe(i.map((function(r){return r.highlightAuto(e,t)})))},e.prototype.fixMarkup=function(e){return this._loader.ready.pipe(i.map((function(t){return t.fixMarkup(e)})))},e.prototype.highlightBlock=function(e){return this._loader.ready.pipe(i.map((function(t){return t.highlightBlock(e)})))},e.prototype.configure=function(e){return this._loader.ready.pipe(i.map((function(t){return t.configure(e)})))},e.prototype.initHighlighting=function(){return this._loader.ready.pipe(i.map((function(e){return e.initHighlighting()})))},e.prototype.registerLanguage=function(e,t){return this._loader.ready.pipe(i.tap((function(r){return r.registerLanguage(e,t)})))},e.prototype.listLanguages=function(){return this._loader.ready.pipe(i.map((function(e){return e.listLanguages()})))},e.prototype.getLanguage=function(e){return this._loader.ready.pipe(i.map((function(t){return t.getLanguage(e)})))},e.prototype.lineNumbersBlock=function(e){return this._loader.ready.pipe(i.filter((function(e){return!!e.lineNumbersBlock})),i.tap((function(t){return t.lineNumbersBlock(e)})))},e.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:s},{type:void 0,decorators:[{type:t.Optional},{type:t.Inject,args:[u]}]}]},e.ngInjectableDef=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(s),t.ɵɵinject(u,8))},token:e,providedIn:"root"}),e}();var c=function(){function e(e,r,n,i){this._hljs=r,this._sanitizer=n,this._options=i,this.highlighted=new t.EventEmitter,this._nativeElement=e.nativeElement}return e.prototype.ngOnChanges=function(e){e.code&&e.code.currentValue&&e.code.currentValue!==e.code.previousValue&&this.highlightElement(this.code,this.languages)},e.prototype.highlightElement=function(e,t){var r=this;this.setTextContent(e),this._hljs.highlightAuto(e,t).subscribe((function(e){r.setInnerHTML(e.value),r.lineNumbers&&r._options&&r._options.lineNumbers&&r.addLineNumbers(),r.highlighted.emit(e)}))},e.prototype.addLineNumbers=function(){var e=this;this.destroyLineNumbersObserver(),n.animationFrameScheduler.schedule((function(){e._hljs.lineNumbersBlock(e._nativeElement).subscribe(),e._lineNumbersObs=new MutationObserver((function(){e._nativeElement.firstElementChild&&"TABLE"===e._nativeElement.firstElementChild.tagName.toUpperCase()&&e._nativeElement.classList.add("hljs-line-numbers"),e.destroyLineNumbersObserver()})),e._lineNumbersObs.observe(e._nativeElement,{childList:!0})}))},e.prototype.destroyLineNumbersObserver=function(){this._lineNumbersObs&&(this._lineNumbersObs.disconnect(),this._lineNumbersObs=null)},e.prototype.setTextContent=function(e){var t=this;n.animationFrameScheduler.schedule((function(){return t._nativeElement.textContent=e}))},e.prototype.setInnerHTML=function(e){var r=this;n.animationFrameScheduler.schedule((function(){return r._nativeElement.innerHTML=r._sanitizer.sanitize(t.SecurityContext.HTML,e)}))},e.decorators=[{type:t.Directive,args:[{host:{"[class.hljs]":"true"},selector:"[highlight]"}]}],e.ctorParameters=function(){return[{type:t.ElementRef},{type:p},{type:r.DomSanitizer},{type:void 0,decorators:[{type:t.Optional},{type:t.Inject,args:[u]}]}]},e.propDecorators={code:[{type:t.Input,args:["highlight"]}],languages:[{type:t.Input}],lineNumbers:[{type:t.Input}],highlighted:[{type:t.Output}]},e}();var h=function(){function e(){}return e.decorators=[{type:t.NgModule,args:[{declarations:[c],exports:[c]}]}],e}();e.HIGHLIGHT_OPTIONS=u,e.Highlight=c,e.HighlightJS=p,e.HighlightLoader=s,e.HighlightModule=h,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=ngx-highlightjs.umd.min.js.map